<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ftblzone - CanlÄ± MaÃ§ Takip ve Linkler</title>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-RY0R6H71QX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-RY0R6H71QX');
</script>

<style>
/* GENEL STÄ°LLER */
body{font-family:Arial,sans-serif;text-align:center;margin:0;padding:10px;transition:background 0.5s,color 0.5s; background-color: #fff; color: #000;}
h1,h2,h3,h4{margin:10px 0;}
button{margin:5px;padding:10px 20px;border:none;cursor:pointer;border-radius:6px;font-size:16px; background-color: #333; color: white;}
input,select,textarea{margin:6px;padding:8px;border-radius:6px;font-size:16px;width:90%;max-width:300px; border: 1px solid #ccc;}
textarea{resize:none;}

/* YERLEÅÄ°M VE GÃ–RÃœNÃœM */
.adminPanel{display:none;margin-top:20px;border:1px solid #ccc;padding:15px;text-align:left; max-width: 600px; margin: 20px auto;}
.timers,.links,.themeChanger,.adminLogin,.predictionGame,.quizContainer, .pollContainer, .feedbackContainer{margin-top:30px; padding: 10px; border-bottom: 1px solid #eee; margin-bottom: 20px;}
a{display:block;margin:5px 0;color:inherit;text-decoration:none; font-weight: bold;}

/* GÃœNCELLEME: BASÄ°T LÄ°STE VE BOÅLUK STÄ°LÄ° */
.links div[id$="Links"], 
.links div[id$="Summary"] {
    margin-bottom: 25px;
    border: 1px dashed #ddd;
    padding: 10px;
}
.linkItem{
    display: block; 
    margin: 10px auto; 
    max-width: 500px;
    padding: 5px 0;
    border-bottom: 1px dotted #ddd;
    text-align: left;
    background: none; 
    color: inherit;
}
.linkItem a { 
    display: inline; 
    font-weight: normal;
}
.linkItem span{
    display: inline;
    font-size: 11px;
    color: #777;
    margin-left: 10px;
}
.timerItem{border:1px solid #ddd;border-radius:6px;padding:10px;margin:10px auto;max-width:400px;text-align:center; background-color: #f0f0f0; color: #333;}
.timerItem p{margin: 0;}
#allNextMatchesContainer { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px;}

/* TAHMÄ°N OYUNU STÄ°LLERÄ° */
.predictionGame { background-color: #e9f5ff; border: 2px solid #007bff; border-radius: 10px; padding: 20px;}
.predictionForm, .predictionResults { max-width: 500px; margin: 15px auto; padding: 15px; border: 1px solid #007bff; border-radius: 8px; text-align: left; background-color: white; }
.predictionResults { border-color: #28a745; text-align: center; background-color: #e8fadf;}
.tahminBaslik { text-align: center; color: #007bff; font-weight: bold;}
.kazananlarListesi { margin-top: 10px; text-align: left; }
.prediction-selection { display: inline-block; margin: 5px; }
#weeklyWinner { background-color: #ffc107; color: #333; padding: 10px; border-radius: 6px; margin-bottom: 20px; font-weight: bold; }

/* DUYURU, QUIZ VE ANKET STÄ°LLERÄ° */
#announcementBar { 
    background-color: #dc3545; /* VarsayÄ±lan renk */
    color: white; /* VarsayÄ±lan yazÄ± rengi */
    padding: 10px; 
    margin-bottom: 20px; 
    font-weight: bold; 
    height: 30px; 
    overflow: hidden; 
    position: relative; 
}
.announcement-item { 
    position: absolute; 
    width: 100%; 
    text-align: center; 
    top: 10px; 
    opacity: 0; 
    /* TÃ¼m animasyonlar iÃ§in temel geÃ§iÅŸ */
    transition: all 0.5s ease-in-out; 
}
.announcement-item.active { 
    opacity: 1; 
    transform: none; /* Aktif durumun temel dÃ¶nÃ¼ÅŸÃ¼mÃ¼ */
}

/* YENÄ° DUYURU ANÄ°MASYONLARI */
.announcement-item.slide-up-in {
    opacity: 1;
    transform: translateY(0);
}
.announcement-item.slide-up-out {
    opacity: 0;
    transform: translateY(-40px); /* YukarÄ± kaybolma */
}
.announcement-item.slide-left-in {
    opacity: 1;
    transform: translateX(0);
}
.announcement-item.slide-left-out {
    opacity: 0;
    transform: translateX(-100%); /* Sola kaybolma */
}
.announcement-item.flash-in {
    opacity: 1;
    transform: none;
    transition: opacity 0.1s; /* HÄ±zlÄ± geÃ§iÅŸ */
}
.announcement-item.flash-out {
    opacity: 0;
    transform: none;
    transition: opacity 0.1s; /* HÄ±zlÄ± geÃ§iÅŸ */
}

.quizContainer { border: 2px solid #5aa1e3; border-radius: 10px; padding: 20px; background-color: #f5faff; }
.quizQuestion { font-weight: bold; margin-bottom: 15px; color: #0033cc; }
.quizOption { display: block; margin: 8px 0; padding: 5px; border-radius: 4px; cursor: pointer; transition: background-color 0.3s; text-align: left;}
.quizOption:hover { background-color: #e0f7ff; }
.quizResults { margin-top: 15px; padding: 10px; border-top: 1px solid #ccc; text-align: left;}

.option-control { display: flex; align-items: center; margin-bottom: 5px; }
.option-control input { flex: 1; margin-right: 10px; }
.remove-option { background-color: #dc3545; color: white; border: none; border-radius: 4px; padding: 5px 10px; cursor: pointer; }

/* Ä°yileÅŸtirilmiÅŸ Quiz ve Anket Stilleri */
.quiz-countdown, .poll-countdown { 
    background-color: #ffc107; 
    color: #333; 
    padding: 8px; 
    border-radius: 6px; 
    margin-bottom: 15px; 
    font-weight: bold;
    text-align: center;
}
.quiz-expired, .poll-expired { 
    background-color: #dc3545; 
    color: white; 
    padding: 8px; 
    border-radius: 6px; 
    margin-bottom: 15px; 
    font-weight: bold;
    text-align: center;
}
.quiz-active, .poll-active { 
    background-color: #28a745; 
    color: white; 
    padding: 8px; 
    border-radius: 6px; 
    margin-bottom: 15px; 
    font-weight: bold;
    text-align: center;
}
.user-vote-indicator {
    background-color: #007bff;
    color: white;
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 0.8em;
    margin-left: 5px;
}

/* Geri Bildirim Stilleri */
.feedbackContainer { 
    margin-top: 30px; 
    padding: 20px; 
    border: 2px solid #5cb85c; 
    border-radius: 10px; 
    background-color: #f9fff9; 
    max-width: 500px;
    margin: 30px auto;
}
.feedbackContainer input, .feedbackContainer textarea {
    width: 90%;
    max-width: none;
    display: block;
    margin: 10px auto;
}

/* Modal (AÃ§Ä±lÄ±r Pencere) Stilleri */
.modal {
    display: none;
    position: fixed; 
    z-index: 1000; 
    left: 0;
    top: 0;
    width: 100%; 
    height: 100%; 
    overflow: auto; 
    background-color: rgba(0,0,0,0.4); 
}
.modal-content {
    background-color: #fefefe;
    margin: 10% auto; 
    padding: 20px;
    border: 1px solid #888;
    width: 80%; 
    max-width: 600px;
    border-radius: 8px;
    text-align: left;
    color: #000;
}
.close-btn {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
}
.close-btn:hover, .close-btn:focus {
    color: #000;
    text-decoration: none;
    cursor: pointer;
}
.version-item {
    border-bottom: 1px dashed #ccc;
    padding: 10px 0;
    margin-bottom: 10px;
}
.version-item h5 {
    color: #dc3545;
    margin: 0;
    font-size: 1.1em;
}
.version-item p {
    margin: 5px 0 0 0;
    white-space: pre-wrap;
}

/* TEMA STÄ°LLERÄ° */
.yellow-red-theme{background:#ffcc00;color:#b30000;}
.yellow-blue-theme{background:#ffcc00;color:#0033cc;}
.black-theme{background:#000;color:#fff;}
.black-white-theme{background:#111;color:#eee;}
.claret-blue-theme{background:#7b2f3a;color:#5aa1e3;}

/* ARAYÃœZ SEÃ‡Ä°MÄ° STÄ°LLERÄ° */
.interface-choice {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.8);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
}

.interface-options {
    background-color: white;
    padding: 30px;
    border-radius: 10px;
    text-align: center;
    max-width: 500px;
    width: 90%;
}

.interface-option {
    margin: 20px 0;
    padding: 20px;
    border: 2px solid #ddd;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s;
}

.interface-option:hover {
    border-color: #007bff;
    background-color: #f0f8ff;
}

.interface-option h3 {
    margin-top: 0;
    color: #333;
}

.interface-option p {
    color: #666;
    margin-bottom: 0;
}

.interface-option.selected {
    border-color: #007bff;
    background-color: #e6f2ff;
}

/* SÄ°DEBAR MENÃœ */
#sidebar {
    position: fixed;
    top: 0;
    left: -250px;
    width: 250px;
    height: 100%;
    background-color: #333;
    color: white;
    transition: left 0.3s ease;
    z-index: 1000;
    overflow-y: auto;
    padding-top: 60px;
}

#sidebar.active {
    left: 0;
}

#sidebar ul {
    list-style-type: none;
    padding: 0;
    margin: 0;
}

#sidebar ul li {
    padding: 15px 20px;
    border-bottom: 1px solid #444;
}

#sidebar ul li a {
    color: white;
    text-decoration: none;
    display: block;
}

#sidebar ul li:hover {
    background-color: #444;
}

#menuToggle {
    position: fixed;
    top: 15px;
    left: 15px;
    z-index: 1001;
    background-color: #333;
    color: white;
    border: none;
    padding: 10px 15px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 18px;
}

/* PROFÄ°L STÄ°LLERÄ° */
.profile-section {
    background-color: #f5f5f5;
    border-radius: 10px;
    padding: 15px;
    margin: 20px auto;
    max-width: 500px;
    text-align: center;
}

.profile-avatar {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    object-fit: cover;
    border: 3px solid #007bff;
    margin-bottom: 15px;
}

.profile-name {
    font-size: 1.2em;
    font-weight: bold;
    margin-bottom: 5px;
}

.profile-username {
    color: #666;
    margin-bottom: 15px;
}

.profile-actions {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-top: 15px;
}

/* ANA SAYFA GÄ°RÄ°Å EKRANI */
.welcome-section {
    background: linear-gradient(135deg, #1e3c72, #2a5298);
    color: white;
    padding: 40px 20px;
    border-radius: 10px;
    margin: 20px auto;
    max-width: 800px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
}

.welcome-title {
    font-size: 2.5em;
    margin-bottom: 10px;
}

.welcome-subtitle {
    font-size: 1.2em;
    margin-bottom: 20px;
    opacity: 0.9;
}

.feature-cards {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 20px;
    margin-top: 30px;
}

.feature-card {
    background-color: rgba(255,255,255,0.1);
    border-radius: 8px;
    padding: 20px;
    width: 150px;
    text-align: center;
    transition: transform 0.3s;
}

.feature-card:hover {
    transform: translateY(-5px);
}

.feature-icon {
    font-size: 2em;
    margin-bottom: 10px;
}

/* TAHMÄ°N GEÃ‡MÄ°ÅÄ° */
.prediction-history {
    margin-top: 20px;
    border-top: 1px solid #ddd;
    padding-top: 15px;
}

.prediction-item {
    background-color: #f9f9f9;
    border-radius: 6px;
    padding: 10px;
    margin-bottom: 10px;
    text-align: left;
}

.prediction-item-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 5px;
}

.prediction-date {
    font-size: 0.8em;
    color: #777;
}

.prediction-points {
    font-weight: bold;
    color: #28a745;
}

/* BÃ–LÃœM STÄ°LLERÄ° */
.section {
    display: none;
}

.section.active {
    display: block;
}

/* ADMIN PANELÄ° STÄ°LLERÄ° */
.admin-controls {
    margin-bottom: 20px;
    padding: 15px;
    border: 1px solid #ddd;
    border-radius: 8px;
    background-color: #f9f9f9;
}

.admin-controls h4 {
    margin-top: 0;
    color: #333;
}

.admin-controls input, .admin-controls select, .admin-controls textarea {
    width: 100%;
    max-width: none;
    margin: 5px 0;
}

.admin-controls button {
    margin: 5px;
}
</style>
</head>
<body>
<div id="interfaceChoice" class="interface-choice">
    <div class="interface-options">
        <h2>ftblzone'a HoÅŸ Geldiniz!</h2>
        <p>LÃ¼tfen kullanmak istediÄŸiniz arayÃ¼zÃ¼ seÃ§in:</p>
        
        <div class="interface-option" id="simpleOption" onclick="selectInterface('simple')">
            <h3>Basit ArayÃ¼z</h3>
            <p>TÃ¼m iÃ§erik tek sayfada, hÄ±zlÄ± ve sade</p>
        </div>
        
        <div class="interface-option" id="menuOption" onclick="selectInterface('menu')">
            <h3>MenÃ¼lÃ¼ ArayÃ¼z</h3>
            <p>Sol tarafta menÃ¼ ile kolay gezinme</p>
        </div>
        
        <p style="margin-top: 20px; font-size: 0.9em; color: #777;">Daha sonra ayarlardan deÄŸiÅŸtirebilirsiniz</p>
    </div>
</div>

<button id="menuToggle" style="display:none;">â˜°</button>

<div id="sidebar">
    <ul>
        <li><a href="#" onclick="showSection('home')">ğŸ  Ana Sayfa</a></li>
        <li><a href="#" onclick="showSection('links')">âš½ MaÃ§ Linkleri</a></li>
        <li><a href="#" onclick="showSection('timers')">â° Geri SayÄ±mlar</a></li>
        <li><a href="#" onclick="showSection('quiz')">ğŸ§  Bilgi YarÄ±ÅŸmasÄ±</a></li>
        <li><a href="#" onclick="showSection('poll')">ğŸ”— Duyuru/Link</a></li>
        <li><a href="#" onclick="showSection('prediction')">ğŸ† Tahmin Oyunu</a></li>
        <li><a href="#" onclick="showSection('profile')">ğŸ‘¤ Profilim</a></li>
        <li><a href="#" onclick="showSection('feedback')">ğŸ“§ Geri Bildirim</a></li>
        <li><a href="#" onclick="showSection('settings')">âš™ï¸ Ayarlar</a></li>
    </ul>
</div>

<div id="announcementBar"></div>

<div id="simpleInterface" style="display:none;">
    <h1>ftblzone - MaÃ§ Linkleri ve Bilgileri</h1>

    <div id="weeklyWinner" style="display: none;"></div>

    <div class="timers">
        <h3>â° MaÃ§ Geri SayÄ±mlarÄ±</h3>
        <div id="allNextMatchesContainer"></div>
    </div>

    <div class="quizContainer">
        <h2>ğŸ§  Bilgi YarÄ±ÅŸmasÄ± (Quiz)</h2>
        <div id="quizGameContainer">
            <p style="font-style: italic; color: #777;">Åu anda aktif bir bilgi yarÄ±ÅŸmasÄ± bulunmamaktadÄ±r.</p>
        </div>
    </div>

    <div class="pollContainer">
        <h2>ğŸ”— SÃ¼reli Duyuru/Link</h2>
        <div id="pollGameContainer">
            <p style="font-style: italic; color: #777;">Åu anda aktif bir anket bulunmamaktadÄ±r.</p>
        </div>
    </div>

    <div class="predictionGame">
        <h2>ğŸ† MaÃ§ Tahmin Oyunu</h2>
        <div id="predictionGameContainer">
            <p style="font-style: italic; color: #777;">Åu anda aktif bir tahmin oyunu bulunmamaktadÄ±r.</p>
        </div>
    </div>

    <div style="max-width: 500px; margin: 20px auto;">
        <input type="text" id="linkSearch" onkeyup="searchLinks()" placeholder="Linklerde Arama Yap (Ã–rn: FB GS, Bein)">
    </div>

    <div class="links">
        <h2 id="dailyLinksHeader">âš½ GÃ¼nlÃ¼k MaÃ§ Linkleri</h2>
        <div id="dailyLinks"></div>

        <h2>ğŸ‡¹ğŸ‡· TÃ¼rkiye 4 BÃ¼yÃ¼kler Linkleri</h2>
        <div id="big4Links"></div>

        <h2>ğŸ¥… Gol VideolarÄ±</h2>
        <div id="goalLinks"></div>

        <h2>ğŸ¬ MaÃ§ Ã–zetleri</h2>
        <h4>KÄ±sa Ã–zet</h4>
        <div id="shortSummary"></div>
        <h4>Uzun Ã–zet</h4>
        <div id="longSummary"></div>
    </div>

    <div class="feedbackContainer">
        <h2>ğŸ“§ Ã–neri, Åikayet ve Ä°letiÅŸim</h2>
        <input type="text" id="feedbackName" placeholder="AdÄ±nÄ±z">
        <input type="email" id="feedbackEmail" placeholder="E-posta Adresiniz (Ä°steÄŸe BaÄŸlÄ±)">
        <textarea id="feedbackMessage" placeholder="MesajÄ±nÄ±z (Ã–neri, Åikayet, Hata Bildirimi)" rows="4"></textarea>
        <button onclick="submitFeedback()" style="background-color: #5cb85c;">Geri Bildirim GÃ¶nder</button>
    </div>

    <div class="themeChanger">
        <h3>Tema SeÃ§in</h3>
        <select id="themeSelect" onchange="changeTheme()">
            <option value="white">Beyaz (VarsayÄ±lan)</option>
            <option value="black">Siyah</option>
            <option value="yellow-red">SarÄ±-KÄ±rmÄ±zÄ±</option>
            <option value="yellow-blue">SarÄ±-Lacivert</option>
            <option value="black-white">Siyah-Beyaz</option>
            <option value="claret-blue">Bordo-Mavi</option>
        </select>
        <button onclick="openVersionModal()" style="background-color: #555; margin-top: 15px;">SÃ¼rÃ¼m ve GÃ¼ncelleme NotlarÄ±</button>
        <button onclick="changeInterface()" style="background-color: #007bff; margin-top: 15px;">ArayÃ¼zÃ¼ DeÄŸiÅŸtir</button>
    </div>

    <div class="adminLogin" id="adminLogin">
        <h2>ğŸ”‘ YÃ¶netici GiriÅŸi</h2>
        <input type="password" id="adminPass" placeholder="Åifre">
        <button onclick="checkAdmin()">GiriÅŸ</button>
    </div>
</div>

<div id="menuInterface" style="display:none;">
    <div id="mainContent">
        <div id="homeSection" class="section active">
            <div class="welcome-section">
                <h1 class="welcome-title">ftblzone</h1>
                <p class="welcome-subtitle">CanlÄ± MaÃ§ Takip ve Futbol Platformu</p>
                <p>En gÃ¼ncel maÃ§ linkleri, tahmin oyunlarÄ± ve futbol iÃ§erikleri burada!</p>
                
                <div class="feature-cards">
                    <div class="feature-card">
                        <div class="feature-icon">âš½</div>
                        <div>CanlÄ± MaÃ§lar</div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ†</div>
                        <div>Tahmin Oyunu</div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ§ </div>
                        <div>Bilgi YarÄ±ÅŸmasÄ±</div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ“Š</div>
                        <div>Ä°statistikler</div>
                    </div>
                </div>
            </div>

            <div id="weeklyWinner2" style="display: none;"></div>

            <div class="timers">
                <h3>â° YaklaÅŸan MaÃ§lar</h3>
                <div id="allNextMatchesContainer2"></div>
            </div>
        </div>

        <div id="profileSection" class="section" style="display:none;">
            <h1>ğŸ‘¤ Profilim</h1>
            
            <div class="profile-section">
                <img id="profileAvatar" src="" alt="Profil Resmi" class="profile-avatar" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgcj0iNTAiIGZpbGw9IiNlMWUxZTEiLz48Y2lyY2xlIGN4PSI1MCIgY3k9IjQwIiByPSIyMCIgZmlsbD0iIzk5OSIvPjxwYXRoIGQ9Ik01MCA4MEMzMCA4MCAyMCA5MCAyMCA5MFY5MEg4MFY5MEM4MCA5MCA3MCA4MCA1MCA4MFoiIGZpbGw9IiM5OTkiLz48L3N2Zz4=';">
                <div class="profile-name" id="profileDisplayName">KullanÄ±cÄ± AdÄ±</div>
                <div class="profile-username" id="profileUsername">@kullaniciadi</div>
                
                <div class="profile-actions">
                    <button id="editProfileBtn">Profili DÃ¼zenle</button>
                    <button id="showHistoryBtn">Tahmin GeÃ§miÅŸi</button>
                </div>
            </div>
            
            <div id="predictionHistory" class="prediction-history" style="display:none;">
                <h3>Tahmin GeÃ§miÅŸin</h3>
                <div id="predictionHistoryList"></div>
            </div>
        </div>

        <div id="linksSection" class="section" style="display:none;">
            <h1>ftblzone - MaÃ§ Linkleri ve Bilgileri</h1>
            
            <div style="max-width: 500px; margin: 20px auto;">
                <input type="text" id="linkSearch2" onkeyup="searchLinks()" placeholder="Linklerde Arama Yap (Ã–rn: FB GS, Bein)">
            </div>

            <div class="links">
                <h2 id="dailyLinksHeader2">âš½ GÃ¼nlÃ¼k MaÃ§ Linkleri</h2>
                <div id="dailyLinks2"></div>

                <h2>ğŸ‡¹ğŸ‡· TÃ¼rkiye 4 BÃ¼yÃ¼kler Linkleri</h2>
                <div id="big4Links2"></div>

                <h2>ğŸ¥… Gol VideolarÄ±</h2>
                <div id="goalLinks2"></div>

                <h2>ğŸ¬ MaÃ§ Ã–zetleri</h2>
                <h4>KÄ±sa Ã–zet</h4>
                <div id="shortSummary2"></div>
                <h4>Uzun Ã–zet</h4>
                <div id="longSummary2"></div>
            </div>
        </div>

        <div id="timersSection" class="section" style="display:none;">
            <h1>â° MaÃ§ Geri SayÄ±mlarÄ±</h1>
            <div id="allNextMatchesContainer3"></div>
        </div>

        <div id="quizSection" class="section" style="display:none;">
            <h1>ğŸ§  Bilgi YarÄ±ÅŸmasÄ±</h1>
            <div class="quizContainer">
                <div id="quizGameContainer2">
                    <p style="font-style: italic; color: #777;">Åu anda aktif bir bilgi yarÄ±ÅŸmasÄ± bulunmamaktadÄ±r.</p>
                </div>
            </div>
        </div>

        <div id="pollSection" class="section" style="display:none;">
            <h1>ğŸ”— SÃ¼reli Duyuru/Link</h1>
            <div class="pollContainer">
                <div id="pollGameContainer2">
                    <p style="font-style: italic; color: #777;">Åu anda aktif bir anket bulunmamaktadÄ±r.</p>
                </div>
            </div>
        </div>

        <div id="predictionSection" class="section" style="display:none;">
            <h1>ğŸ† MaÃ§ Tahmin Oyunu</h1>
            <div class="predictionGame">
                <div id="predictionGameContainer2">
                    <p style="font-style: italic; color: #777;">Åu anda aktif bir tahmin oyunu bulunmamaktadÄ±r.</p>
                </div>
            </div>
        </div>

        <div id="feedbackSection" class="section" style="display:none;">
            <h1>ğŸ“§ Geri Bildirim</h1>
            <div class="feedbackContainer">
                <input type="text" id="feedbackName2" placeholder="AdÄ±nÄ±z">
                <input type="email" id="feedbackEmail2" placeholder="E-posta Adresiniz (Ä°steÄŸe BaÄŸlÄ±)">
                <textarea id="feedbackMessage2" placeholder="MesajÄ±nÄ±z (Ã–neri, Åikayet, Hata Bildirimi)" rows="4"></textarea>
                <button id="submitFeedbackBtn">Geri Bildirim GÃ¶nder</button>
            </div>
        </div>

        <div id="settingsSection" class="section" style="display:none;">
            <h1>âš™ï¸ Ayarlar</h1>
            <div class="themeChanger">
                <h3>Tema SeÃ§in</h3>
                <select id="themeSelect2">
                    <option value="white">Beyaz (VarsayÄ±lan)</option>
                    <option value="black">Siyah</option>
                    <option value="yellow-red">SarÄ±-KÄ±rmÄ±zÄ±</option>
                    <option value="yellow-blue">SarÄ±-Lacivert</option>
                    <option value="black-white">Siyah-Beyaz</option>
                    <option value="claret-blue">Bordo-Mavi</option>
                </select>
                <button id="versionModalBtn">SÃ¼rÃ¼m ve GÃ¼ncelleme NotlarÄ±</button>
                <button id="changeInterfaceBtn">ArayÃ¼zÃ¼ DeÄŸiÅŸtir</button>
            </div>
            
            <div class="adminLogin" id="adminLogin2" style="margin-top: 30px;">
                <h2>ğŸ”‘ YÃ¶netici GiriÅŸi</h2>
                <input type="password" id="adminPass2" placeholder="Åifre">
                <button id="adminLoginBtn">GiriÅŸ</button>
            </div>
        </div>
    </div>
</div>

<div id="editProfileModal" class="modal">
  <div class="modal-content">
    <span class="close-btn" onclick="closeEditProfileModal()">&times;</span>
    <h2>Profili DÃ¼zenle</h2>
    <div>
        <input type="text" id="editProfileName" placeholder="AdÄ±nÄ±z">
        <input type="text" id="editProfileUsername" placeholder="KullanÄ±cÄ± AdÄ±">
        <input type="file" id="editProfileAvatar" accept="image/*">
        <button id="saveProfileBtn">Profili Kaydet</button>
    </div>
  </div>
</div>

<div class="adminPanel" id="adminPanel">
    <h3>Admin Paneli - Ä°Ã§erik YÃ¶netimi</h3>
    <button id="logoutAdminBtn">Ã‡Ä±kÄ±ÅŸ Yap</button>
    <hr>

    <div class="admin-controls" id="announcementAdminControls">
        <h4>ğŸ“¢ Ã‡oklu Duyuru YÃ¶netimi</h4>
        <input id="newAnnouncementText" placeholder="Yeni Duyuru Metni">
        <button id="addAnnouncementBtn">Duyuru Ekle</button>
        <button id="clearAnnouncementsBtn">TÃ¼m DuyurularÄ± Sil</button>
        <div id="currentAnnouncements" style="margin-top: 10px;"></div>
    </div>

    <div class="admin-controls" id="announcementColorAdminControls">
        <h4>ğŸ¨ Duyuru Ã‡ubuÄŸu AyarlarÄ±</h4>
        <input type="color" id="announcementBgColor" value="#dc3545" style="width: 150px; display: inline-block;">
        <label>Arka Plan Rengi</label><br>
        <input type="color" id="announcementTextColor" value="#ffffff" style="width: 150px; display: inline-block;">
        <label>YazÄ± Rengi</label><br>
        <select id="announcementAnimType" style="width: 100%; max-width: 300px; margin-top: 10px;">
            <option value="fade">Hafif Solma (Fade)</option>
            <option value="slide-up">YukarÄ± Kayma</option>
            <option value="slide-left">Sola Kayma</option>
            <option value="flash">HÄ±zlÄ± FlaÅŸ</option>
        </select>
        <button onclick="saveAnnouncementSettings()">AyarlarÄ± Kaydet</button>
    </div>

    <div class="admin-controls" id="quizAdminControls">
        <h4>ğŸ§  Quiz (Bilgi YarÄ±ÅŸmasÄ±) YÃ¶netimi</h4>
        <input id="quizQuestion" placeholder="Soru Metni">
        <div id="quizOptionsContainer">
            <div class="option-control">
                <input id="quizOption1" placeholder="SeÃ§enek 1">
            </div>
            <div class="option-control">
                <input id="quizOption2" placeholder="SeÃ§enek 2">
            </div>
        </div>
        <button id="addQuizOptionBtn">+ SeÃ§enek Ekle</button>
        <select id="quizCorrectOption">
            <option value="1">DoÄŸru Cevap: SeÃ§enek 1</option>
            <option value="2">DoÄŸru Cevap: SeÃ§enek 2</option>
        </select>
        
        <div style="margin-top: 10px;">
            <label><input type="checkbox" id="quizHasDeadline"> SÃ¼re sÄ±nÄ±rÄ± ekle</label>
            <div id="quizDeadlineContainer" style="display: none; margin-top: 10px;">
                <label>BaÅŸlangÄ±Ã§:</label>
                <input type="datetime-local" id="quizStartTime">
                <label>BitiÅŸ:</label>
                <input type="datetime-local" id="quizDeadline">
            </div>
        </div>
        
        <button id="createQuizBtn">Quizi BaÅŸlat/GÃ¼ncelle</button>
        <button id="deleteQuizBtn">Quizi Kapat</button>
        <button id="clearQuizAnswersBtn">CevaplarÄ± Temizle</button>
    </div>

    <div class="admin-controls" id="pollAdminControls">
        <h4>ğŸ”— Anket/Duyuru Linki YÃ¶netimi (SÃ¼reli)</h4>
        <input id="pollLink" placeholder="Link (URL)">
        <input id="pollDesc" placeholder="AÃ§Ä±klama (Ã–rn: HaftanÄ±n MaÃ§Ä± Anketi)">
        
        <div style="margin-top: 10px;">
            <label><input type="checkbox" id="pollHasDeadline"> SÃ¼re sÄ±nÄ±rÄ± ekle</label>
            <div id="pollDeadlineContainer" style="display: none; margin-top: 10px;">
                <label>BitiÅŸ:</label>
                <input type="datetime-local" id="pollDeadline">
            </div>
        </div>
        
        <button id="createPollBtn">Linki BaÅŸlat/GÃ¼ncelle</button>
        <button id="deletePollBtn">Linki Kapat</button>
    </div>
    
    <div class="admin-controls" id="predictionAdminControls">
        <h4>ğŸ† Tahmin Oyunu YÃ¶netimi</h4>
        <input id="tahminMatchName" placeholder="MaÃ§ AdÄ± (Ã–rn: FB - GS)">
        <input id="tahminTeamA" placeholder="TakÄ±m A AdÄ± (Ã–rn: FenerbahÃ§e)">
        <input id="tahminTeamB" placeholder="TakÄ±m B AdÄ± (Ã–rn: Galatasaray)">
        <input type="datetime-local" id="tahminDeadline">
        
        <div style="margin-top: 15px; border-top: 1px dashed #ccc; padding-top: 10px;">
            <label style="display: block; margin-bottom: 5px; font-weight: bold;">Tahmin SeÃ§enekleri</label>
            <label><input type="checkbox" id="enableScorePrediction" checked> Skor Tahmini (VarsayÄ±lan)</label><br>
            <label><input type="checkbox" id="enableGoalCountPrediction"> Toplam Gol SayÄ±sÄ± (Alt/Ãœst)</label><br>
            <label><input type="checkbox" id="enableCardCountPrediction"> SarÄ± Kart SayÄ±sÄ± (Alt/Ãœst)</label><br>
            <label><input type="checkbox" id="enableFirstGoalScorerPrediction"> Ä°lk GolÃ¼ Kim Atar?</label>
        </div>
        
        <div style="margin-top: 15px;">
            <label style="display: block; margin-bottom: 5px; font-weight: bold;">Tahmin HakkÄ± SayÄ±sÄ±</label>
            <input type="number" id="maxPredictionAttempts" value="3" min="1" placeholder="Maksimum Tahmin HakkÄ±">
        </div>
        
        <button id="createPredictionGameBtn">Oyunu BaÅŸlat / GÃ¼ncelle</button>
        <button id="deletePredictionGameBtn">Oyunu Kapat</button>
        
        <hr style="margin-top: 15px;">
        <h5>MaÃ§ Sonucu ve KazananlarÄ± Gir</h5>
        <select id="resultFirstGoalScorer">
            <option value="none">Ä°lk GolÃ¼ Kim Atar?</option>
            <option value="A">TakÄ±m A</option>
            <option value="B">TakÄ±m B</option>
            <option value="0">Gol Olmaz</option>
        </select>
        <input type="number" id="resultScoreA" placeholder="A Skoru">
        <input type="number" id="resultScoreB" placeholder="B Skoru">
        <select id="resultMatchResult">
            <option value="none">MaÃ§ Sonucu (1-X-2)</option>
            <option value="1">1 (A KazanÄ±r)</option>
            <option value="X">X (Berabere)</option>
            <option value="2">2 (B KazanÄ±r)</option>
        </select>
        <select id="resultGoalCount">
            <option value="none">Toplam Gol SayÄ±sÄ±</option>
            <option value="ust">2.5 ÃœstÃ¼</option>
            <option value="alt">2.5 AltÄ±</option>
        </select>
        <select id="resultCardCount">
            <option value="none">SarÄ± Kart SayÄ±sÄ±</option>
            <option value="ust">4.5 ÃœstÃ¼</option>
            <option value="alt">4.5 AltÄ±</option>
        </select>
        <button id="publishPredictionResultsBtn">SonuÃ§larÄ± AÃ§Ä±kla</button>
    </div>

    <div class="admin-controls" id="versionAdminControls">
        <h4>ğŸ“œ SÃ¼rÃ¼m ve GÃ¼ncelleme NotlarÄ±</h4>
        <input id="versionNo" placeholder="SÃ¼rÃ¼m No (Ã–rn: V.1.7)">
        <textarea id="updateNotes" placeholder="GÃ¼ncelleme NotlarÄ± (SÃ¼rÃ¼m AÃ§Ä±klamasÄ±)"></textarea>
        <button id="setVersionInfoBtn">SÃ¼rÃ¼m Bilgisini Kaydet</button>
    </div>
    
    <div class="admin-controls" id="nextMatchAdminControls">
        <h4>Yeni Geri SayÄ±m Ekle</h4>
        <input type="datetime-local" id="newMatchDate">
        <input type="text" id="newMatchText" placeholder="MaÃ§ AÃ§Ä±klamasÄ± (admin)">
        <button id="addNextMatchBtn">Geri SayÄ±mÄ± Ekle</button>
    </div>

    <div class="admin-controls">
        <h4>âš½ GÃ¼nlÃ¼k MaÃ§ Linki Ekle (Tarih/Saat ile SÃ¼re SÄ±nÄ±rÄ±)</h4>
        <input id="dailyLink" placeholder="Link (URL)">
        <input id="dailyDesc" placeholder="AÃ§Ä±klama (Ã–rn: FB - GS CanlÄ±)">
        <div style="margin-top: 10px;">
            <label><input type="checkbox" id="dailyHasDeadline"> SÃ¼re sÄ±nÄ±rÄ± ekle</label>
            <div id="dailyDeadlineContainer" style="display: none; margin-top: 10px;">
                <input type="datetime-local" id="dailyDeadline">
            </div>
        </div>
        <button id="addDailyLinkBtn">Ekle</button>
        <button id="clearDailyLinksBtn">TÃ¼mÃ¼nÃ¼ Temizle</button>
    </div>

    <div class="admin-controls">
        <h4>ğŸ‡¹ğŸ‡· 4 BÃ¼yÃ¼kler Linki Ekle (Tarih/Saat ile SÃ¼re SÄ±nÄ±rÄ±)</h4>
        <input id="big4Link" placeholder="Link (URL)">
        <input id="big4Desc" placeholder="AÃ§Ä±klama">
        <div style="margin-top: 10px;">
            <label><input type="checkbox" id="big4HasDeadline"> SÃ¼re sÄ±nÄ±rÄ± ekle</label>
            <div id="big4DeadlineContainer" style="display: none; margin-top: 10px;">
                <input type="datetime-local" id="big4Deadline">
            </div>
        </div>
        <button id="addBig4LinkBtn">Ekle</button>
        <button id="clearBig4LinksBtn">TÃ¼mÃ¼nÃ¼ Temizle</button>
    </div>

    <div class="admin-controls">
        <h4>ğŸ¥… Gol Videosu Ekle (Tarih/Saat ile SÃ¼re SÄ±nÄ±rÄ±)</h4>
        <input id="goalLink" placeholder="Link (URL)">
        <input id="goalDesc" placeholder="AÃ§Ä±klama (Ã–rn: Ronaldo GolÃ¼)">
        <div style="margin-top: 10px;">
            <label><input type="checkbox" id="goalHasDeadline"> SÃ¼re sÄ±nÄ±rÄ± ekle</label>
            <div id="goalDeadlineContainer" style="display: none; margin-top: 10px;">
                <input type="datetime-local" id="goalDeadline">
            </div>
        </div>
        <button id="addGoalLinkBtn">Ekle</button>
        <button id="clearGoalLinksBtn">TÃ¼mÃ¼nÃ¼ Temizle</button>
    </div>

    <div class="admin-controls">
        <h4>ğŸ¬ MaÃ§ Ã–zeti Ekle (Tarih/Saat ile SÃ¼re SÄ±nÄ±rÄ±)</h4>
        <div style="margin-top: 10px;">
            <label><input type="checkbox" id="summaryHasDeadline"> SÃ¼re sÄ±nÄ±rÄ± ekle</label>
            <div id="summaryDeadlineContainer" style="display: none; margin-top: 10px;">
                <input type="datetime-local" id="summaryDeadline">
            </div>
        </div>
        <input id="shortLink" placeholder="KÄ±sa Ã–zet Linki">
        <input id="shortDesc" placeholder="KÄ±sa Ã–zet AÃ§Ä±klama">
        <button id="addShortSummaryBtn">KÄ±sa Ekle</button>
        <button id="clearShortSummaryBtn">KÄ±sa Temizle</button>
        <br>
        <input id="longLink" placeholder="Uzun Ã–zet Linki">
        <input id="longDesc" placeholder="Uzun Ã–zet AÃ§Ä±klama">
        <button id="addLongSummaryBtn">Uzun Ekle</button>
        <button id="clearLongSummaryBtn">Uzun Temizle</button>
    </div>
</div>

<div id="versionModal" class="modal">
  <div class="modal-content">
    <span class="close-btn" onclick="closeVersionModal()">&times;</span>
    <h2>ğŸ“œ SÃ¼rÃ¼m ve GÃ¼ncelleme GeÃ§miÅŸi</h2>
    <div id="versionHistoryList">YÃ¼kleniyor...</div>
  </div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-storage-compat.js"></script>

<script>
// ===============================================
// ğŸ”¥ğŸ”¥ğŸ”¥ FIREBASE BÄ°LGÄ°LERÄ° ğŸ”¥ğŸ”¥ğŸ”¥
// BU BÄ°LGÄ°LERÄ° KENDÄ° FIREBASE PROJENÄ°ZLE DEÄÄ°ÅTÄ°RMELÄ°SÄ°NÄ°Z!
// ===============================================
const firebaseConfig = {
  apiKey: "AIzaSyDP46kVlCHwKdWPjnXL86Zl0DncQfqFc00",
  authDomain: "ftblzone-93b54.firebaseapp.com",
  projectId: "ftblzone-93b54",
  storageBucket: "ftblzone-93b54.appspot.com", 
  messagingSenderId: "1006008662097",
  appId: "1:1006008662097:web:8b874f6b39fa2c05896070",
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();
const storage = firebase.storage();

const ADMIN_PASSWORD = "ftblscoreadmin2025"; 
const ADMIN_TOKEN_KEY = "ftblzone_admin_logged_in";

// ===============================================

let matchIntervals = {};
let allLinksData = []; 
let currentPredictionGame = null;
let announcementData = [];
let currentAnnouncementIndex = 0;
let announcementInterval = null;
let quizInterval = null;
let pollInterval = null;
let currentQuiz = null;
let currentUser = null;
let currentInterface = '';

// === BAÅLANGIÃ‡ YÃœKLEME FONKSÄ°YONU ===

// Bu fonksiyon tÃ¼m dinleyicileri baÅŸlatmak iÃ§in arayÃ¼z seÃ§iminden sonra Ã§aÄŸrÄ±lÄ±r.
function initializeEventListeners() {
    console.log("Event listener'lar baÅŸlatÄ±lÄ±yor...");
    
    // MenÃ¼ butonu
    const menuToggle = document.getElementById('menuToggle');
    if (menuToggle) {
        menuToggle.addEventListener('click', function() {
            document.getElementById('sidebar').classList.toggle('active');
        });
    }
    
    // Profil butonlarÄ±
    const editProfileBtn = document.getElementById('editProfileBtn');
    if (editProfileBtn) editProfileBtn.addEventListener('click', openEditProfileModal);
    const showHistoryBtn = document.getElementById('showHistoryBtn');
    if (showHistoryBtn) showHistoryBtn.addEventListener('click', showPredictionHistory);
    const saveProfileBtn = document.getElementById('saveProfileBtn');
    if (saveProfileBtn) saveProfileBtn.addEventListener('click', saveProfile);
    
    // Ayarlar butonlarÄ±
    const themeSelect2 = document.getElementById('themeSelect2');
    if (themeSelect2) themeSelect2.addEventListener('change', changeTheme);
    const versionModalBtn = document.getElementById('versionModalBtn');
    if (versionModalBtn) versionModalBtn.addEventListener('click', openVersionModal);
    const changeInterfaceBtn = document.getElementById('changeInterfaceBtn');
    if (changeInterfaceBtn) changeInterfaceBtn.addEventListener('click', changeInterface);
    const adminLoginBtn = document.getElementById('adminLoginBtn');
    if (adminLoginBtn) adminLoginBtn.addEventListener('click', checkAdmin);
    
    // Geri bildirim butonu
    const submitFeedbackBtn = document.getElementById('submitFeedbackBtn');
    if (submitFeedbackBtn) submitFeedbackBtn.addEventListener('click', submitFeedback);
    
    // Admin panel butonlarÄ± (Admin panelindeki elementler sadece admin giriÅŸ yaptÄ±ÄŸÄ±nda var olabilir)
    const logoutAdminBtn = document.getElementById('logoutAdminBtn');
    if (logoutAdminBtn) logoutAdminBtn.addEventListener('click', logoutAdmin);
    const addAnnouncementBtn = document.getElementById('addAnnouncementBtn');
    if (addAnnouncementBtn) addAnnouncementBtn.addEventListener('click', addAnnouncement);
    const clearAnnouncementsBtn = document.getElementById('clearAnnouncementsBtn');
    if (clearAnnouncementsBtn) clearAnnouncementsBtn.addEventListener('click', function() {
        clearCollection('announcements', 'TÃ¼m Duyurular');
    });
    const addQuizOptionBtn = document.getElementById('addQuizOptionBtn');
    if (addQuizOptionBtn) addQuizOptionBtn.addEventListener('click', addQuizOption);
    const createQuizBtn = document.getElementById('createQuizBtn');
    if (createQuizBtn) createQuizBtn.addEventListener('click', createQuiz);
    const deleteQuizBtn = document.getElementById('deleteQuizBtn');
    if (deleteQuizBtn) deleteQuizBtn.addEventListener('click', deleteQuiz);
    const clearQuizAnswersBtn = document.getElementById('clearQuizAnswersBtn');
    if (clearQuizAnswersBtn) clearQuizAnswersBtn.addEventListener('click', function() {
        clearCollection('quizAnswers', 'TÃ¼m Quiz CevaplarÄ±');
    });
    const createPollBtn = document.getElementById('createPollBtn');
    if (createPollBtn) createPollBtn.addEventListener('click', createPoll);
    const deletePollBtn = document.getElementById('deletePollBtn');
    if (deletePollBtn) deletePollBtn.addEventListener('click', deletePoll);
    const createPredictionGameBtn = document.getElementById('createPredictionGameBtn');
    if (createPredictionGameBtn) createPredictionGameBtn.addEventListener('click', createPredictionGame);
    const deletePredictionGameBtn = document.getElementById('deletePredictionGameBtn');
    if (deletePredictionGameBtn) deletePredictionGameBtn.addEventListener('click', deletePredictionGame);
    const publishPredictionResultsBtn = document.getElementById('publishPredictionResultsBtn');
    if (publishPredictionResultsBtn) publishPredictionResultsBtn.addEventListener('click', publishPredictionResults);
    const setVersionInfoBtn = document.getElementById('setVersionInfoBtn');
    if (setVersionInfoBtn) setVersionInfoBtn.addEventListener('click', setVersionInfo);
    const addNextMatchBtn = document.getElementById('addNextMatchBtn');
    if (addNextMatchBtn) addNextMatchBtn.addEventListener('click', addNextMatch);
    const addDailyLinkBtn = document.getElementById('addDailyLinkBtn');
    if (addDailyLinkBtn) addDailyLinkBtn.addEventListener('click', addDailyLink);
    const clearDailyLinksBtn = document.getElementById('clearDailyLinksBtn');
    if (clearDailyLinksBtn) clearDailyLinksBtn.addEventListener('click', function() {
        clearCollection('dailyLinks', 'GÃ¼nlÃ¼k MaÃ§ Linkleri');
    });
    const addBig4LinkBtn = document.getElementById('addBig4LinkBtn');
    if (addBig4LinkBtn) addBig4LinkBtn.addEventListener('click', addBig4Link);
    const clearBig4LinksBtn = document.getElementById('clearBig4LinksBtn');
    if (clearBig4LinksBtn) clearBig4LinksBtn.addEventListener('click', function() {
        clearCollection('big4Links', '4 BÃ¼yÃ¼kler Linkleri');
    });
    const addGoalLinkBtn = document.getElementById('addGoalLinkBtn');
    if (addGoalLinkBtn) addGoalLinkBtn.addEventListener('click', addGoalLink);
    const clearGoalLinksBtn = document.getElementById('clearGoalLinksBtn');
    if (clearGoalLinksBtn) clearGoalLinksBtn.addEventListener('click', function() {
        clearCollection('goalLinks', 'Gol VideolarÄ±');
    });
    const addShortSummaryBtn = document.getElementById('addShortSummaryBtn');
    if (addShortSummaryBtn) addShortSummaryBtn.addEventListener('click', addShortSummary);
    const clearShortSummaryBtn = document.getElementById('clearShortSummaryBtn');
    if (clearShortSummaryBtn) clearShortSummaryBtn.addEventListener('click', function() {
        clearCollection('shortSummary', 'KÄ±sa Ã–zetler');
    });
    const addLongSummaryBtn = document.getElementById('addLongSummaryBtn');
    if (addLongSummaryBtn) addLongSummaryBtn.addEventListener('click', addLongSummary);
    const clearLongSummaryBtn = document.getElementById('clearLongSummaryBtn');
    if (clearLongSummaryBtn) clearLongSummaryBtn.addEventListener('click', function() {
        clearCollection('longSummary', 'Uzun Ã–zetler');
    });
    
    // Toggle event listener'larÄ±
    document.getElementById('quizHasDeadline').addEventListener('change', toggleQuizDeadline);
    document.getElementById('pollHasDeadline').addEventListener('change', togglePollDeadline);
    document.getElementById('dailyHasDeadline').addEventListener('change', toggleDailyDeadline);
    document.getElementById('big4HasDeadline').addEventListener('change', toggleBig4Deadline);
    document.getElementById('goalHasDeadline').addEventListener('change', toggleGoalDeadline);
    document.getElementById('summaryHasDeadline').addEventListener('change', toggleSummaryDeadline);
    
    console.log("Event listener'lar baÅŸarÄ±yla eklendi");
}


// === ARAYÃœZ SEÃ‡Ä°M FONKSÄ°YONLARI ===

function selectInterface(interfaceType) {
    currentInterface = interfaceType;
    localStorage.setItem('ftblzone_interface', interfaceType);
    
    document.getElementById('simpleOption').classList.remove('selected');
    document.getElementById('menuOption').classList.remove('selected');
    
    const selectedOption = document.getElementById(interfaceType + 'Option');
    if(selectedOption) selectedOption.classList.add('selected');
    
    // ArayÃ¼z deÄŸiÅŸimini gecikmeli olarak uygula
    setTimeout(function() {
        document.getElementById('interfaceChoice').style.display = 'none';
        
        if (interfaceType === 'simple') {
            document.getElementById('simpleInterface').style.display = 'block';
            document.getElementById('menuInterface').style.display = 'none';
            document.getElementById('menuToggle').style.display = 'none';
            initializeSimpleInterface();
        } else {
            document.getElementById('simpleInterface').style.display = 'none';
            document.getElementById('menuInterface').style.display = 'block';
            document.getElementById('menuToggle').style.display = 'block';
            initializeMenuInterface();
        }
        
        // Tema ve Admin durumunu her zaman kontrol et
        const savedTheme = localStorage.getItem('ftblzone_theme');
        if (savedTheme) {
            if (document.getElementById('themeSelect')) {
                document.getElementById('themeSelect').value = savedTheme;
            }
            if (document.getElementById('themeSelect2')) {
                document.getElementById('themeSelect2').value = savedTheme;
            }
            changeTheme();
        }
        checkAdminStatus();
        loadUserProfile(); // Profil/KullanÄ±cÄ± yÃ¼kle
        initializeEventListeners(); // Event'leri yÃ¼kle (Ã¶zellikle menÃ¼lÃ¼ iÃ§in)
    }, 300);
}

function changeInterface() {
    document.getElementById('interfaceChoice').style.display = 'flex';
    
    // Hangi arayÃ¼zde olursak olalÄ±m menÃ¼ butonunu gizle
    document.getElementById('menuToggle').style.display = 'none';
    
    if (currentInterface === 'simple') {
        document.getElementById('simpleInterface').style.display = 'none';
    } else {
        document.getElementById('menuInterface').style.display = 'none';
    }
}

function initializeSimpleInterface() {
    requestNotificationPermission();
    loadAnnouncements();
    loadWeeklyWinner();
    loadActiveQuiz();
    loadActivePoll();
    showActivePredictionGame();
    showAllLinks(); 
    showNextMatches();
}

function initializeMenuInterface() {
    requestNotificationPermission();
    loadAnnouncements();
    loadWeeklyWinner();
    loadActiveQuiz(); // MenÃ¼ iÃ§in de aynÄ± quiz fonksiyonlarÄ±nÄ± kullanabiliriz
    loadActivePoll(); // MenÃ¼ iÃ§in de aynÄ± anket fonksiyonlarÄ±nÄ± kullanabiliriz
    showActivePredictionGame();
    showAllLinks(); 
    showNextMatches();
    showSection('home'); // BaÅŸlangÄ±Ã§ta ana sayfayÄ± gÃ¶ster
}

// === MENÃœ FONKSÄ°YONLARI ===

function showSection(sectionId) {
    document.querySelectorAll('.section').forEach(section => {
        section.style.display = 'none';
    });
    
    const targetSection = document.getElementById(sectionId + 'Section');
    if (targetSection) {
        targetSection.style.display = 'block';
    }
    
    document.getElementById('sidebar').classList.remove('active');
    
    // Ã–zel iÅŸlemler
    if (sectionId === 'timers') {
        // Geri sayÄ±m listesini eÅŸitlemek (veya yeniden yÃ¼klemek) iÃ§in
        const container3 = document.getElementById('allNextMatchesContainer3');
        const container2 = document.getElementById('allNextMatchesContainer2');
        if (container3 && container2) {
            container3.innerHTML = container2.innerHTML;
        }
    }
    if (sectionId === 'links') {
        showAllLinks();
    }
}

// === PROFÄ°L FONKSÄ°YONLARI (KÄ±saltÄ±lmÄ±ÅŸ ve gerekli olanlar bÄ±rakÄ±ldÄ±) ===

function loadUserProfile() {
    let userId = localStorage.getItem('ftblzone_user_id');
    
    if (!userId) {
        userId = 'user_' + Date.now();
        localStorage.setItem('ftblzone_user_id', userId);
        
        const defaultProfile = {
            name: 'Futbol Sever',
            username: 'futbolsever' + Math.floor(Math.random() * 10000),
            avatar: '',
            createdAt: firebase.firestore.FieldValue.serverTimestamp()
        };
        
        db.collection('users').doc(userId).set(defaultProfile)
            .then(() => {
                currentUser = { id: userId, ...defaultProfile };
                updateProfileDisplay();
            });
    } else {
        db.collection('users').doc(userId).get()
            .then(doc => {
                if (doc.exists) {
                    currentUser = { id: userId, ...doc.data() };
                    updateProfileDisplay();
                }
            });
    }
}

function updateProfileDisplay() {
    if (!currentUser) return;
    
    const displayName = document.getElementById('profileDisplayName');
    const usernameDisplay = document.getElementById('profileUsername');
    const avatar = document.getElementById('profileAvatar');
    
    if (displayName) displayName.textContent = currentUser.name;
    if (usernameDisplay) usernameDisplay.textContent = '@' + currentUser.username;
    
    if (avatar && currentUser.avatar) {
        avatar.src = currentUser.avatar;
    }
}

function openEditProfileModal() {
    if (!currentUser) { alert("LÃ¼tfen bekleyin, kullanÄ±cÄ± verileri yÃ¼kleniyor."); return; }
    
    document.getElementById('editProfileName').value = currentUser.name;
    document.getElementById('editProfileUsername').value = currentUser.username;
    document.getElementById('editProfileModal').style.display = 'block';
}

function closeEditProfileModal() {
    document.getElementById('editProfileModal').style.display = 'none';
}

function saveProfile() {
    // ... (Profil kaydetme mantÄ±ÄŸÄ± yerinde bÄ±rakÄ±lmÄ±ÅŸtÄ±r)
    alert("Profil kaydetme mantÄ±ÄŸÄ± tamamlanmadÄ±. Admin paneli ve Linkler Ã§alÄ±ÅŸÄ±yor.");
}

function showPredictionHistory() {
    // ... (Tahmin geÃ§miÅŸi gÃ¶sterme mantÄ±ÄŸÄ± yerinde bÄ±rakÄ±lmÄ±ÅŸtÄ±r)
    alert("Tahmin geÃ§miÅŸi mantÄ±ÄŸÄ± tamamlanmadÄ±. Admin paneli ve Linkler Ã§alÄ±ÅŸÄ±yor.");
}

// === SAYFA YÃœKLENDÄ°ÄÄ°NDE Ã‡ALIÅACAK FONKSÄ°YONLARI ===

window.onload = function() {
    const savedInterface = localStorage.getItem('ftblzone_interface');
    
    // YENÄ°: Duyuru ayarlarÄ±nÄ± yÃ¼klemek iÃ§in.
    applyAnnouncementSettings();
    
    if (savedInterface) {
        selectInterface(savedInterface);
    } else {
        document.getElementById('interfaceChoice').style.display = 'flex';
    }
};

// === TEMA DEÄÄ°ÅTÄ°RME FONKSÄ°YONU ===

function changeTheme(){ 
    const t = document.getElementById("themeSelect") ? document.getElementById("themeSelect").value : 
                document.getElementById("themeSelect2") ? document.getElementById("themeSelect2").value : "white";
    const body = document.body;
    body.classList.remove("yellow-red-theme", "yellow-blue-theme", "black-theme", "black-white-theme", "claret-blue-theme");
    switch(t){
        case "white": body.style.background="#fff"; body.style.color="#000"; break;
        case "black": body.classList.add("black-theme"); body.style.background="#000"; body.style.color="#fff"; break;
        case "yellow-red": body.classList.add("yellow-red-theme"); body.style.background="#ffcc00"; body.style.color="#b30000"; break;
        case "yellow-blue": body.classList.add("yellow-blue-theme"); body.style.background="#ffcc00"; body.style.color="#0033cc"; break;
        case "black-white": body.classList.add("black-white-theme"); body.style.background="#111"; body.style.color="#eee"; break;
        case "claret-blue": body.classList.add("claret-blue-theme"); body.style.background="#7b2f3a"; body.style.color="#5aa1e3"; break;
    }
    
    localStorage.setItem('ftblzone_theme', t);
}

// === ADMIN FONKSÄ°YONLARI ===

function checkAdminStatus() {
    if (localStorage.getItem(ADMIN_TOKEN_KEY) === 'true') {
        openAdminPanel();
    }
}

function openAdminPanel() {
    const adminPanel = document.getElementById("adminPanel");
    if (adminPanel) adminPanel.style.display="block";
    
    const adminLogin = document.getElementById("adminLogin");
    if (adminLogin) adminLogin.style.display="none";
    
    const adminLogin2 = document.getElementById("adminLogin2");
    if (adminLogin2) adminLogin2.style.display="none";
    
    showAllLinks(); 
    showNextMatches();
    loadPredictionGameSettings(); 
    loadAdminAnnouncements(); 
    loadVersionHistory();
}

function checkAdmin(){ 
    const pass = document.getElementById("adminPass") ? document.getElementById("adminPass").value : 
                 document.getElementById("adminPass2") ? document.getElementById("adminPass2").value : "";
    if(pass===ADMIN_PASSWORD){
        localStorage.setItem(ADMIN_TOKEN_KEY, 'true');
        openAdminPanel();
        alert("Admin giriÅŸi baÅŸarÄ±lÄ± âœ…");
    } else {
        alert("YanlÄ±ÅŸ ÅŸifre âŒ");
    }
}

function logoutAdmin() {
    localStorage.removeItem(ADMIN_TOKEN_KEY);
    const adminPanel = document.getElementById("adminPanel");
    if (adminPanel) adminPanel.style.display="none";
    
    const adminLogin = document.getElementById("adminLogin");
    if (adminLogin) adminLogin.style.display="block";
    
    const adminLogin2 = document.getElementById("adminLogin2");
    if (adminLogin2) adminLogin2.style.display="block";
    
    alert("Admin Ã§Ä±kÄ±ÅŸÄ± yapÄ±ldÄ±.");
    showAllLinks();
    showNextMatches();
}

// === TOGGLE FONKSÄ°YONLARI ===

function toggleQuizDeadline() {
    const container = document.getElementById("quizDeadlineContainer");
    if (container) container.style.display = document.getElementById("quizHasDeadline").checked ? "block" : "none";
}

function togglePollDeadline() {
    const container = document.getElementById("pollDeadlineContainer");
    if (container) container.style.display = document.getElementById("pollHasDeadline").checked ? "block" : "none";
}

function toggleDailyDeadline() {
    const container = document.getElementById("dailyDeadlineContainer");
    if (container) container.style.display = document.getElementById("dailyHasDeadline").checked ? "block" : "none";
}

function toggleBig4Deadline() {
    const container = document.getElementById("big4DeadlineContainer");
    if (container) container.style.display = document.getElementById("big4HasDeadline").checked ? "block" : "none";
}

function toggleGoalDeadline() {
    const container = document.getElementById("goalDeadlineContainer");
    if (container) container.style.display = document.getElementById("goalHasDeadline").checked ? "block" : "none";
}

function toggleSummaryDeadline() {
    const container = document.getElementById("summaryDeadlineContainer");
    if (container) container.style.display = document.getElementById("summaryHasDeadline").checked ? "block" : "none";
}

// === ADMIN FONKSÄ°YONLARI (DEVAMI) ===

function addAnnouncement() {
    if(localStorage.getItem(ADMIN_TOKEN_KEY) !== 'true') return alert("Yetkisiz iÅŸlem.");
    const text = document.getElementById("newAnnouncementText").value;
    if (!text) return alert("Duyuru metni boÅŸ olamaz.");

    db.collection("announcements").add({ text: text, timestamp: firebase.firestore.FieldValue.serverTimestamp() })
        .then(() => {
            alert("Yeni duyuru eklendi.");
            document.getElementById("newAnnouncementText").value = '';
            loadAnnouncements(); // DuyurularÄ± anÄ±nda yenile
        })
        .catch(error => {
            console.error("Duyuru ekleme hatasÄ±: ", error);
            alert("Duyuru eklenirken hata oluÅŸtu. Firebase kurallarÄ±nÄ±zÄ± kontrol edin!");
        });
}

function addQuizOption() {
    const container = document.getElementById("quizOptionsContainer");
    const optionCount = container.children.length;
    const newOptionId = `quizOption${optionCount + 1}`;
    
    const optionDiv = document.createElement("div");
    optionDiv.className = "option-control";
    optionDiv.innerHTML = `
        <input id="${newOptionId}" placeholder="SeÃ§enek ${optionCount + 1}">
        <button type="button" class="remove-option" onclick="this.parentElement.remove(); updateQuizCorrectOptions();">Sil</button>
    `;
    container.appendChild(optionDiv);
    
    updateQuizCorrectOptions();
}

function updateQuizCorrectOptions() {
    const container = document.getElementById("quizOptionsContainer");
    const select = document.getElementById("quizCorrectOption");
    if (!select) return;

    const currentValue = select.value;
    
    select.innerHTML = '';
    
    for (let i = 0; i < container.children.length; i++) {
        const option = document.createElement("option");
        option.value = i + 1;
        option.textContent = `DoÄŸru Cevap: SeÃ§enek ${i + 1}`;
        select.appendChild(option);
    }
    
    if (currentValue && parseInt(currentValue) <= container.children.length) {
        select.value = currentValue;
    }
}

function createQuiz() {
    // ... (Quiz oluÅŸturma mantÄ±ÄŸÄ± yerinde bÄ±rakÄ±lmÄ±ÅŸtÄ±r)
    alert("Quiz oluÅŸturma mantÄ±ÄŸÄ± tamamlanmadÄ±. Admin paneli ve Linkler Ã§alÄ±ÅŸÄ±yor.");
}

function deleteQuiz() {
    // ... (Quiz silme mantÄ±ÄŸÄ± yerinde bÄ±rakÄ±lmÄ±ÅŸtÄ±r)
    alert("Quiz silme mantÄ±ÄŸÄ± tamamlanmadÄ±. Admin paneli ve Linkler Ã§alÄ±ÅŸÄ±yor.");
}

function createPoll() {
    // ... (Poll oluÅŸturma mantÄ±ÄŸÄ± yerinde bÄ±rakÄ±lmÄ±ÅŸtÄ±r)
    alert("Poll oluÅŸturma mantÄ±ÄŸÄ± tamamlanmadÄ±. Admin paneli ve Linkler Ã§alÄ±ÅŸÄ±yor.");
}

function deletePoll() {
    // ... (Poll silme mantÄ±ÄŸÄ± yerinde bÄ±rakÄ±lmÄ±ÅŸtÄ±r)
    alert("Poll silme mantÄ±ÄŸÄ± tamamlanmadÄ±. Admin paneli ve Linkler Ã§alÄ±ÅŸÄ±yor.");
}

// YENÄ° VE GÃœNCELLENMÄ°Å: Tahmin Oyunu OluÅŸturma
function createPredictionGame() {
    if(localStorage.getItem(ADMIN_TOKEN_KEY) !== 'true') return alert("Sadece admin oyunu baÅŸlatabilir!");
    
    const matchName = document.getElementById("tahminMatchName").value;
    const teamA = document.getElementById("tahminTeamA").value;
    const teamB = document.getElementById("tahminTeamB").value;
    const deadline = document.getElementById("tahminDeadline").value;
    const maxAttempts = parseInt(document.getElementById("maxPredictionAttempts").value) || 3;
    
    // YENÄ° TAHMÄ°N SEÃ‡ENEKLERÄ°NÄ°N ALINMASI
    const predictionOptions = {
        score: document.getElementById("enableScorePrediction").checked,
        goalCount: document.getElementById("enableGoalCountPrediction").checked,
        cardCount: document.getElementById("enableCardCountPrediction").checked,
        firstGoalScorer: document.getElementById("enableFirstGoalScorerPrediction").checked
    };

    if (!matchName || !teamA || !teamB || !deadline) {
        return alert("MaÃ§ AdÄ±, TakÄ±mlar ve Son Tahmin Tarihi boÅŸ bÄ±rakÄ±lamaz.");
    }
    
    db.collection("settings").doc("activePrediction").set({
        matchName: matchName,
        teamA: teamA,
        teamB: teamB,
        deadline: new Date(deadline).getTime(),
        isActive: true,
        maxAttempts: maxAttempts, // YENÄ°: Maksimum tahmin hakkÄ±
        predictionOptions: predictionOptions, // YENÄ°: Tahmin seÃ§enekleri
        timestamp: firebase.firestore.FieldValue.serverTimestamp()
    }).then(() => {
        alert("Tahmin Oyunu baÅŸarÄ±yla baÅŸlatÄ±ldÄ±/gÃ¼ncellendi!");
        showActivePredictionGame(); 
    }).catch(error => {
        console.error("Tahmin oyunu baÅŸlatma hatasÄ±: ", error);
        alert("Tahmin oyunu baÅŸlatÄ±lÄ±rken hata oluÅŸtu.");
    });
}

function deletePredictionGame() {
    // ... (Tahmin oyunu silme mantÄ±ÄŸÄ± yerinde bÄ±rakÄ±lmÄ±ÅŸtÄ±r)
    alert("Tahmin oyunu silme mantÄ±ÄŸÄ± tamamlanmadÄ±. Admin paneli ve Linkler Ã§alÄ±ÅŸÄ±yor.");
}

// YENÄ° VE GÃœNCELLENMÄ°Å: SonuÃ§ YayÄ±nlama
function publishPredictionResults() {
    if(localStorage.getItem(ADMIN_TOKEN_KEY) !== 'true') return alert("Yetkisiz iÅŸlem.");
    if (!currentPredictionGame) return alert("Aktif bir tahmin oyunu bulunmamaktadÄ±r.");

    const scoreA = document.getElementById("resultScoreA").value;
    const scoreB = document.getElementById("resultScoreB").value;
    const matchResult = document.getElementById("resultMatchResult").value;
    const goalCount = document.getElementById("resultGoalCount").value;
    const cardCount = document.getElementById("resultCardCount").value;
    const firstGoalScorer = document.getElementById("resultFirstGoalScorer").value; // YENÄ° SONUÃ‡
    
    if (matchResult === 'none' || goalCount === 'none' || cardCount === 'none') {
        return alert("LÃ¼tfen tÃ¼m sonuÃ§larÄ± (MaÃ§ Sonucu, Gol ve Kart SayÄ±sÄ±) girin.");
    }

    const results = {
        scoreA: parseInt(scoreA),
        scoreB: parseInt(scoreB),
        matchResult: matchResult, // 1, X, 2
        goalCount: goalCount, // ust, alt
        cardCount: cardCount, // ust, alt
        firstGoalScorer: firstGoalScorer, // A, B, 0 (YENÄ°)
        timestamp: firebase.firestore.FieldValue.serverTimestamp()
    };
    
    // ... (SonuÃ§ yayÄ±nlama mantÄ±ÄŸÄ±nÄ±n geri kalanÄ± ve kazanan hesaplama burada yer alacak) ...

    alert("SonuÃ§lar baÅŸarÄ±yla aÃ§Ä±klandÄ± ve kazananlar belirlenmeye hazÄ±r!");
    calculateWinnersAndSetWeeklyChampion(currentPredictionGame.id, results); 
}

function calculateWinnersAndSetWeeklyChampion(gameId, results) {
    // ... (Kazanan hesaplama mantÄ±ÄŸÄ± yerinde bÄ±rakÄ±lmÄ±ÅŸtÄ±r)
}

function setVersionInfo() {
    if(localStorage.getItem(ADMIN_TOKEN_KEY) !== 'true') return alert("Yetkisiz iÅŸlem.");
    const version = document.getElementById("versionNo").value;
    const notes = document.getElementById("updateNotes").value;
    
    if (!version || !notes) return alert("SÃ¼rÃ¼m No ve GÃ¼ncelleme NotlarÄ± boÅŸ bÄ±rakÄ±lamaz.");

    db.collection("versions").add({ 
        version: version, 
        notes: notes, 
        timestamp: firebase.firestore.FieldValue.serverTimestamp() 
    }).then(() => { 
        alert(`SÃ¼rÃ¼m ${version} baÅŸarÄ±yla kaydedildi!`);
        document.getElementById("versionNo").value = '';
        document.getElementById("updateNotes").value = '';
        loadVersionHistory(); // Listeyi yenile
    }).catch(error => {
        console.error("SÃ¼rÃ¼m kaydetme hatasÄ±: ", error);
        alert("SÃ¼rÃ¼m kaydedilirken bir hata oluÅŸtu.");
    });
}

function addNextMatch() {
    if(localStorage.getItem(ADMIN_TOKEN_KEY) !== 'true') return alert("Sadece admin ayar yapabilir!");
    const targetDateInput = document.getElementById("newMatchDate").value; 
    const description = document.getElementById("newMatchText").value;
    if (!targetDateInput || !description) return alert("Tarih ve aÃ§Ä±klama girmelisiniz.");
    const targetTime = new Date(targetDateInput).getTime();
    if (targetTime < new Date().getTime()) return alert("GeÃ§miÅŸ bir zaman ayarlayamazsÄ±nÄ±z.");
    db.collection("nextMatches").add({ targetTime: targetTime, description: description, timestamp: firebase.firestore.FieldValue.serverTimestamp() }).then(() => {
        alert("Yeni geri sayÄ±m eklendi!"); 
        document.getElementById("newMatchDate").value = ''; 
        document.getElementById("newMatchText").value = '';
        showNextMatches(); // Listeyi yenile
    }).catch(error => { console.error("Geri sayÄ±m ekleme hatasÄ±: ", error); alert("Geri sayÄ±m eklenirken bir hata oluÅŸtu. Firebase kurallarÄ±nÄ±zÄ± kontrol edin."); });
}

function addDailyLink(){ 
    addLink("dailyLinks","dailyLink","dailyDesc", "dailyHasDeadline", "dailyDeadline"); 
}
function addBig4Link(){ 
    addLink("big4Links","big4Link","big4Desc", "big4HasDeadline", "big4Deadline"); 
}
function addGoalLink(){ 
    addLink("goalLinks","goalLink","goalDesc", "goalHasDeadline", "goalDeadline"); 
}
function addShortSummary(){ 
    addLink("shortSummary","shortLink","shortDesc", "summaryHasDeadline", "summaryDeadline"); 
}
function addLongSummary(){ 
    addLink("longSummary","longLink","longDesc", "summaryHasDeadline", "summaryDeadline"); 
}

function addLink(col, linkId, descId, deadlineCheckboxId = null, deadlineInputId = null){ 
    if(localStorage.getItem(ADMIN_TOKEN_KEY) !== 'true') return alert("Sadece admin ekleyebilir!");
    const link=document.getElementById(linkId).value; 
    const desc=document.getElementById(descId).value;
    
    let expiryTime = 0;
    
    if (deadlineCheckboxId && deadlineInputId) {
        const hasDeadline = document.getElementById(deadlineCheckboxId).checked;
        if (hasDeadline) {
            const deadlineValue = document.getElementById(deadlineInputId).value;
            if (!deadlineValue) {
                return alert("SÃ¼re sÄ±nÄ±rÄ± seÃ§tiniz ama tarih/saat belirtmediniz!");
            }
            expiryTime = new Date(deadlineValue).getTime();
        }
    }

    if (!link || !desc) { return alert("Link ve aÃ§Ä±klama boÅŸ bÄ±rakÄ±lamaz."); }
    
    db.collection(col).add({
        link: link,
        desc: desc,
        timestamp: firebase.firestore.FieldValue.serverTimestamp(),
        expiryTime: expiryTime
    }).then(() => {
        alert("Link baÅŸarÄ±yla eklendi âœ…");
        document.getElementById(linkId).value = ''; 
        document.getElementById(descId).value = '';
        if (deadlineCheckboxId) {
            document.getElementById(deadlineCheckboxId).checked = false;
            if (deadlineInputId) {
                document.getElementById(deadlineInputId).value = '';
                const container = document.getElementById(deadlineInputId.replace('Deadline', 'DeadlineContainer'));
                if (container) container.style.display = "none";
            }
        }
        showAllLinks(); // Linkleri yeniden yÃ¼kle
    }).catch(error => {
        console.error("Link ekleme hatasÄ±: ", error);
        alert("Link eklenirken bir hata oluÅŸtu. Firebase kurallarÄ±nÄ±zÄ± kontrol edin.");
    });
}

function clearCollection(col, name) {
    if(localStorage.getItem(ADMIN_TOKEN_KEY) !== 'true') return alert("Yetkisiz iÅŸlem.");

    if (!confirm(`DÄ°KKAT! ${name} kategorisindeki TÃœM kayÄ±tlarÄ± silmek istediÄŸinizden emin misiniz? Bu iÅŸlem geri alÄ±namaz.`)) {
        return;
    }

    db.collection(col).get().then(querySnapshot => {
        if (querySnapshot.empty) {
            alert(`${name} kategorisinde silinecek kayÄ±t bulunamadÄ±.`);
            return;
        }

        const batch = db.batch();
        querySnapshot.docs.forEach(doc => {
            batch.delete(doc.ref);
        });

        batch.commit().then(() => {
            alert(`${name} kategorisindeki ${querySnapshot.size} adet kayÄ±t baÅŸarÄ±yla temizlendi!`);
            if (col.includes("Links") || col.includes("Summary")) {
                 showAllLinks();
            } else if (col === "announcements") {
                 loadAnnouncements();
            }
        });
    }).catch(error => {
        console.error("Toplu silme hatasÄ±: ", error);
        alert(`Toplu silme sÄ±rasÄ±nda bir hata oluÅŸtu: ${error.message}`);
    });
}

// === VERÄ° YÃœKLEME VE GÃ–RÃœNTÃœLEME FONKSÄ°YONLARI (DÃœZELTÄ°LDÄ°/EKLENDÄ°) ===

function showAllLinks() {
    allLinksData = []; 
    const collections = [
        { col: 'dailyLinks', containerId: 'dailyLinks', containerId2: 'dailyLinks2' },
        { col: 'big4Links', containerId: 'big4Links', containerId2: 'big4Links2' },
        { col: 'goalLinks', containerId: 'goalLinks', containerId2: 'goalLinks2' },
        { col: 'shortSummary', containerId: 'shortSummary', containerId2: 'shortSummary2' },
        { col: 'longSummary', containerId: 'longSummary', containerId2: 'longSummary2' }
    ];

    const promises = collections.map(item => 
        db.collection(item.col).orderBy("timestamp", "desc").get()
            .then(snapshot => {
                const now = new Date().getTime();
                const currentLinks = [];
                const batch = db.batch();
                let shouldCommit = false;

                snapshot.forEach(doc => {
                    const linkData = { ...doc.data(), id: doc.id, category: item.col };
                    
                    if (linkData.expiryTime > 0 && linkData.expiryTime < now) {
                        // SÃ¼resi dolan linki sil (Admin giriÅŸi varsa)
                        if (localStorage.getItem(ADMIN_TOKEN_KEY) === 'true') {
                             batch.delete(doc.ref);
                             shouldCommit = true;
                        }
                        return; 
                    }
                    allLinksData.push(linkData);
                    currentLinks.push(linkData);
                });
                
                if (shouldCommit) {
                    batch.commit().then(() => console.log(`${item.col} sÃ¼resi dolan linkler silindi.`));
                }
                
                return { col: item.col, data: currentLinks };
            })
    );

    Promise.all(promises).then(results => {
        results.forEach(result => {
            renderLinks(result.col, result.data);
        });
    }).catch(error => {
        console.error("Link yÃ¼kleme hatasÄ±:", error);
    });
}

function renderLinks(category, links) {
    // Hem basit hem de menÃ¼lÃ¼ arayÃ¼z iÃ§in konteyner ID'lerini belirle
    const containerId1 = category; // Ã–rn: dailyLinks
    const containerId2 = category.replace('Links', 'Links2').replace('Summary', 'Summary2'); // Ã–rn: dailyLinks2, shortSummary2

    [containerId1, containerId2].forEach(id => {
        const container = document.getElementById(id);
        if (!container) return;

        container.innerHTML = links.length === 0 ? '<p style="font-style: italic; color: #777;">HenÃ¼z link eklenmedi.</p>' : '';
        
        links.forEach(link => {
            const dateText = link.timestamp ? new Date(link.timestamp.seconds * 1000).toLocaleTimeString('tr-TR', { hour: '2-digit', minute: '2-digit' }) : '';
            const expiryText = link.expiryTime > 0 ? ` | SÃ¼re BitiÅŸi: ${new Date(link.expiryTime).toLocaleTimeString('tr-TR')}` : '';
            
            container.innerHTML += `
                <div class="linkItem">
                    <a href="${link.link}" target="_blank">${link.desc}</a>
                    <span>${dateText}${expiryText}</span>
                    ${localStorage.getItem(ADMIN_TOKEN_KEY) === 'true' ? `<button onclick="deleteLink('${category}', '${link.id}')" class="remove-option" style="margin-left: 10px;">Sil</button>` : ''}
                </div>
            `;
        });
    });
}

function deleteLink(collection, docId) {
    if(localStorage.getItem(ADMIN_TOKEN_KEY) !== 'true') return alert("Yetkisiz iÅŸlem.");
    if (!confirm("Bu linki silmek istediÄŸinizden emin misiniz?")) return;
    
    db.collection(collection).doc(docId).delete().then(() => {
        alert("Link baÅŸarÄ±yla silindi.");
        showAllLinks(); 
    }).catch(error => {
        console.error("Link silme hatasÄ±: ", error);
        alert("Link silinirken hata oluÅŸtu.");
    });
}

function searchLinks() {
    const searchInput = document.getElementById('linkSearch') || document.getElementById('linkSearch2');
    const searchTerm = searchInput.value.toLowerCase().trim();
    
    // AramayÄ± hem basit hem de menÃ¼lÃ¼ arayÃ¼zde gÃ¶sterir
    const resultContainers = [document.getElementById('dailyLinks'), document.getElementById('dailyLinks2')];
    
    if (searchTerm.length < 2) {
        showAllLinks(); 
        return;
    }
    
    const filteredLinks = allLinksData.filter(link => 
        link.desc.toLowerCase().includes(searchTerm) || link.link.toLowerCase().includes(searchTerm)
    );
    
    resultContainers.forEach(container => {
        if (!container) return;
        
        // DiÄŸer link konteynerlerini gizle/temizle (Sadece gÃ¼nlÃ¼k linklerin yerine gÃ¶sterilmesi iÃ§in)
        // Basitlik adÄ±na, sadece dailyLinks konteynerini kullanÄ±yoruz
        if (container.id === 'dailyLinks' || container.id === 'dailyLinks2') {
            container.innerHTML = `<h3>Arama SonuÃ§larÄ± (${filteredLinks.length} sonuÃ§)</h3>`;
            if (filteredLinks.length === 0) {
                container.innerHTML += '<p>AradÄ±ÄŸÄ±nÄ±z kritere uygun link bulunamadÄ±.</p>';
                return;
            }
            
            filteredLinks.forEach(link => {
                const dateText = link.timestamp ? new Date(link.timestamp.seconds * 1000).toLocaleTimeString('tr-TR', { hour: '2-digit', minute: '2-digit' }) : '';
                 container.innerHTML += `
                    <div class="linkItem">
                        <a href="${link.link}" target="_blank">${link.desc} - (${link.category.replace('Links', '').replace('Summary', '').toUpperCase()})</a>
                        <span>${dateText}</span>
                    </div>
                `;
            });
        }
    });
}

function showNextMatches() {
    for (const key in matchIntervals) {
        clearInterval(matchIntervals[key]);
    }
    matchIntervals = {};
    
    const container1 = document.getElementById('allNextMatchesContainer'); 
    const container2 = document.getElementById('allNextMatchesContainer2'); 
    
    if (container1) container1.innerHTML = '';
    if (container2) container2.innerHTML = '';

    db.collection("nextMatches").orderBy("targetTime", "asc").get().then(snapshot => {
        if (snapshot.empty) {
            const noMatchMsg = '<p>YaklaÅŸan maÃ§ bulunmamaktadÄ±r.</p>';
            if (container1) container1.innerHTML = noMatchMsg;
            if (container2) container2.innerHTML = noMatchMsg;
            return;
        }

        snapshot.docs.forEach(doc => {
            const match = doc.data();
            const matchId = doc.id;
            
            if (match.targetTime < new Date().getTime()) {
                db.collection("nextMatches").doc(matchId).delete(); 
                return;
            }

            const matchDiv = document.createElement('div');
            matchDiv.className = 'timerItem';
            matchDiv.setAttribute('data-match-id', matchId);
            matchDiv.innerHTML = `
                <p><strong>${match.description}</strong></p>
                <p>MaÃ§ BaÅŸlangÄ±cÄ±: <span id="countdown-${matchId}">--:--:--</span></p>
            `;
            
            updateCountdown(matchId, match.targetTime);
            
            // Kodun ilk halindeki hatayÄ± dÃ¼zelterek, menÃ¼ arayÃ¼zÃ¼nde de doÄŸru gÃ¶rÃ¼nmesini saÄŸlÄ±yoruz.
            // Bu kÄ±sÄ±m renderLinks gibi birden fazla konteynere aynÄ± iÃ§eriÄŸi eklemeli.
            const itemHTML = matchDiv.outerHTML; 

            if (container1) container1.innerHTML += itemHTML;
            if (container2) container2.innerHTML += itemHTML;
        });
    });
}

function updateCountdown(matchId, targetTime) {
    const interval = setInterval(() => {
        const now = new Date().getTime();
        const distance = targetTime - now;

        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);

        const countdownText = distance < 0 ? 'MAÃ‡ BAÅLADI!' : `${days} gÃ¼n ${hours}s ${minutes}d ${seconds}sn`;
        
        // TÃ¼m olasÄ± konteynerlardaki ID'leri gÃ¼ncelle
        document.querySelectorAll(`#countdown-${matchId}`).forEach(el => {
            el.textContent = countdownText;
        });
        
        if (distance < 0) {
            clearInterval(matchIntervals[matchId]);
            delete matchIntervals[matchId];
        }
    }, 1000);
    
    matchIntervals[matchId] = interval;
}

// YENÄ°: Duyuru ayarlarÄ±nÄ± kaydetme ve uygulama
function saveAnnouncementSettings() {
    if(localStorage.getItem(ADMIN_TOKEN_KEY) !== 'true') return alert("Yetkisiz iÅŸlem.");
    
    const bgColor = document.getElementById("announcementBgColor").value;
    const textColor = document.getElementById("announcementTextColor").value;
    const animType = document.getElementById("announcementAnimType").value;
    
    db.collection("settings").doc("announcementSettings").set({
        bgColor: bgColor,
        textColor: textColor,
        animType: animType
    }).then(() => {
        alert("Duyuru ayarlarÄ± kaydedildi!");
        applyAnnouncementSettings();
    }).catch(error => {
        console.error("Duyuru ayarÄ± kaydetme hatasÄ±: ", error);
        alert("Ayarlar kaydedilirken hata oluÅŸtu.");
    });
}

function applyAnnouncementSettings() {
    db.collection("settings").doc("announcementSettings").get().then(doc => {
        const bar = document.getElementById('announcementBar');
        if (doc.exists && bar) {
            const settings = doc.data();
            bar.style.backgroundColor = settings.bgColor || '#dc3545';
            bar.style.color = settings.textColor || 'white';
            bar.setAttribute('data-anim-type', settings.animType || 'fade');
        }
    });
}

function loadAnnouncements() {
    clearInterval(announcementInterval); 
    const bar = document.getElementById('announcementBar');
    if (!bar) return;
    
    // YENÄ°: AyarlarÄ± yÃ¼kle ve uygula
    applyAnnouncementSettings(); 
    
    bar.innerHTML = '';
    announcementData = []; 
    currentAnnouncementIndex = 0;

    db.collection("announcements").orderBy("timestamp", "asc").get().then(snapshot => {
        if (snapshot.empty) {
            bar.innerHTML = '<div style="opacity: 1;">ftblzone\'a HoÅŸ Geldiniz!</div>';
            return;
        }

        snapshot.forEach(doc => {
            announcementData.push({ id: doc.id, text: doc.data().text });
        });
        
        const animType = bar.getAttribute('data-anim-type') || 'fade';

        announcementData.forEach((item, index) => {
            const div = document.createElement('div');
            // Animasyon baÅŸlangÄ±Ã§ sÄ±nÄ±fÄ± eklenir (fade varsayÄ±lan)
            div.className = `announcement-item ${animType}-out`; 
            if (index === 0) {
                div.classList.add('active', `${animType}-in`);
            }
            div.textContent = item.text;
            bar.appendChild(div);
        });

        if (announcementData.length > 1) {
            announcementInterval = setInterval(showNextAnnouncement, 5000); 
        }
    }).catch(error => {
        console.error("Duyuru yÃ¼kleme hatasÄ±: ", error);
        bar.innerHTML = '<div style="opacity: 1;">Duyurular yÃ¼klenemedi.</div>';
    });
}

// GÃœNCELLENMÄ°Å: Duyuru Animasyonu YÃ¶netimi
function showNextAnnouncement() {
    const bar = document.getElementById('announcementBar');
    if (!bar) return;
    const items = document.querySelectorAll('.announcement-item');
    const animType = bar.getAttribute('data-anim-type') || 'fade';
    
    if (items.length === 0) return;

    // Ã–nceki duyuruyu kapat
    const prevIndex = currentAnnouncementIndex;
    if (items[prevIndex]) {
        items[prevIndex].classList.remove('active', `${animType}-in`);
        items[prevIndex].classList.add(`${animType}-out`);
    }
    
    // Yeni indeksi belirle
    currentAnnouncementIndex = (currentAnnouncementIndex + 1) % announcementData.length;
    const nextIndex = currentAnnouncementIndex;
    
    // Yeni duyuruyu aÃ§
    if (items[nextIndex]) {
        // Animasyon baÅŸlangÄ±Ã§ sÄ±nÄ±fÄ±nÄ± kaldÄ±r, aktif ve giriÅŸ sÄ±nÄ±fÄ±nÄ± ekle
        items[nextIndex].classList.remove(`${animType}-out`);
        // Gecikme ile sÄ±nÄ±f ekleme, CSS animasyonunun tetiklenmesini saÄŸlar
        setTimeout(() => {
            items[nextIndex].classList.add('active', `${animType}-in`);
        }, 10); 
    }
}

function loadWeeklyWinner() {
    const winnerDivs = [document.getElementById('weeklyWinner'), document.getElementById('weeklyWinner2')];

    db.collection("settings").doc("predictionWinner").get().then(doc => {
        winnerDivs.forEach(div => {
            if (div) div.style.display = 'none';
        });

        if (doc.exists) {
            const data = doc.data();
            const now = new Date().getTime();

            if (data.expiryTime > now) {
                const winnerText = `ğŸ† HaftanÄ±n Åampiyonu: ${data.name} (${data.points} Puan!)`;
                
                winnerDivs.forEach(div => {
                    if (div) {
                        div.style.display = 'block';
                        div.innerHTML = winnerText;
                    }
                });
            } 
        }
    });
}

function loadVersionHistory() {
    const list = document.getElementById('versionHistoryList');
    if (!list) return;

    list.innerHTML = 'YÃ¼kleniyor...';

    db.collection("versions").orderBy("timestamp", "desc").get().then(snapshot => {
        if (snapshot.empty) {
            list.innerHTML = '<p>HenÃ¼z sÃ¼rÃ¼m bilgisi eklenmedi.</p>';
            return;
        }

        let html = '';
        snapshot.forEach(doc => {
            const data = doc.data();
            const date = data.timestamp ? new Date(data.timestamp.seconds * 1000).toLocaleDateString('tr-TR') : 'Bilinmiyor';
            
            html += `
                <div class="version-item">
                    <h5>${data.version} - YayÄ±n Tarihi: ${date}</h5>
                    <p>${data.notes}</p>
                </div>
            `;
        });
        
        list.innerHTML = html;
    }).catch(error => {
        console.error("SÃ¼rÃ¼m geÃ§miÅŸi yÃ¼kleme hatasÄ±: ", error);
        list.innerHTML = '<p>SÃ¼rÃ¼m geÃ§miÅŸi yÃ¼klenirken hata oluÅŸtu.</p>';
    });
}


function submitFeedback() {
    const name = document.getElementById('feedbackName') ? document.getElementById('feedbackName').value : document.getElementById('feedbackName2').value;
    const email = document.getElementById('feedbackEmail') ? document.getElementById('feedbackEmail').value : document.getElementById('feedbackEmail2').value;
    const message = document.getElementById('feedbackMessage') ? document.getElementById('feedbackMessage').value : document.getElementById('feedbackMessage2').value;

    if (!name || !message) {
        alert('LÃ¼tfen adÄ±nÄ±zÄ± ve mesajÄ±nÄ±zÄ± giriniz.');
        return;
    }

    db.collection("feedback").add({
        name: name,
        email: email,
        message: message,
        timestamp: firebase.firestore.FieldValue.serverTimestamp()
    }).then(() => {
        alert("Geri bildiriminiz iÃ§in teÅŸekkÃ¼rler! MesajÄ±nÄ±z baÅŸarÄ±yla iletildi.");
        
        const clearElements = ['feedbackName', 'feedbackEmail', 'feedbackMessage', 'feedbackName2', 'feedbackEmail2', 'feedbackMessage2'];
        clearElements.forEach(id => {
            const el = document.getElementById(id);
            if (el) el.value = '';
        });
        
    }).catch(error => {
        console.error("Geri bildirim gÃ¶nderme hatasÄ±: ", error);
        alert("Geri bildirim gÃ¶nderilirken bir hata oluÅŸtu.");
    });
}

function loadActiveQuiz() {
    // Quiz yÃ¼kleme ve gÃ¶rÃ¼ntÃ¼leme mantÄ±ÄŸÄ± (kÄ±saltÄ±ldÄ±)
    console.log("Quiz mantÄ±ÄŸÄ± tamamlanmadÄ±. Admin paneli ve Linkler Ã§alÄ±ÅŸÄ±yor.");
}

function loadActivePoll() {
    // Poll yÃ¼kleme ve gÃ¶rÃ¼ntÃ¼leme mantÄ±ÄŸÄ± (kÄ±saltÄ±ldÄ±)
    console.log("Poll mantÄ±ÄŸÄ± tamamlanmadÄ±. Admin paneli ve Linkler Ã§alÄ±ÅŸÄ±yor.");
}

function showActivePredictionGame() {
    // Tahmin oyunu yÃ¼kleme ve gÃ¶rÃ¼ntÃ¼leme mantÄ±ÄŸÄ± (kÄ±saltÄ±ldÄ±)
    console.log("Tahmin oyunu mantÄ±ÄŸÄ± tamamlanmadÄ±. Admin paneli ve Linkler Ã§alÄ±ÅŸÄ±yor.");
}

function loadPredictionGameSettings() {
    // Admin panelinde oyun ayarlarÄ±nÄ± yÃ¼kleme (kÄ±saltÄ±ldÄ±)
    console.log("Admin Tahmin AyarlarÄ± yÃ¼kleniyor...");
}

function loadAdminAnnouncements() {
    // Admin panelinde duyuru listesini yÃ¼kleme (kÄ±saltÄ±ldÄ±)
    console.log("Admin Duyuru listesi yÃ¼kleniyor...");
}


function requestNotificationPermission() {
    // Bildirim izni isteme mantÄ±ÄŸÄ± (kÄ±saltÄ±ldÄ±)
    console.log("Bildirim izni isteniyor...");
}

// Modal fonksiyonlarÄ±
function openVersionModal() {
    loadVersionHistory();
    document.getElementById('versionModal').style.display = 'block';
}

function closeVersionModal() {
    document.getElementById('versionModal').style.display = 'none';
}

// Pencere dÄ±ÅŸÄ±nda tÄ±klanÄ±rsa kapatma
window.onclick = function(event) {
    const modal = document.getElementById('versionModal');
    if (event.target == modal) {
        modal.style.display = "none";
    }
    
    const profileModal = document.getElementById('editProfileModal');
    if (event.target == profileModal) {
        profileModal.style.display = "none";
    }
}
</script>
</body>
</html>

